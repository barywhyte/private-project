apiVersion: argoproj.io/v1alpha1
kind: AnalysisTemplate
metadata:
  name: health-check-analysis
  namespace: {{ .Values.namespace }}
spec:
  metrics:
    - name: health-check
      successCondition: result == true
      provider:
        web:
          url: http://{{ .Chart.Name }}.{{ .Values.namespace }}.svc.cluster.local:{{ .Values.service.targetPort }}/health
          timeout: 10s
